---
import '../styles/base.css';
import '../styles/theme.css';

const title = 'Nmoji - Emoji Browser';
const description = 'Browse and search through emojis with categories, tags, and filters. Copy emojis to clipboard instantly.';
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="color-scheme" content="light dark" />

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content="https://nmoji.netlify.app/app" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://nmoji.netlify.app/app" />

    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />

    <title>{title}</title>

    <script type="module">
      // Initialize theme from localStorage on page load
      // This prevents theme flash during page load
      const storedTheme = localStorage.getItem('nmoji-theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const isDark = storedTheme === 'dark' || (!storedTheme && prefersDark);

      if (isDark) {
        document.documentElement.classList.add('dark');
        document.body.classList.add('dark-mode');
      }
    </script>
  </head>
  <body class="overflow-hidden">
    <!-- App wrapper: theme class is applied here instead of html to scope dark mode -->
    <div id="app-wrapper" class="app-wrapper h-screen w-screen overflow-hidden">
      <slot />

      <!-- Skip to content link for accessibility -->
      <a href="#main-content" class="sr-only focus:not-sr-only">Skip to main content</a>
    </div>

    <style is:global>
      html {
        scroll-behavior: smooth;
      }

      body {
        margin: 0;
        padding: 0;
      }

      .sr-only:not(:focus, :focus-within) {
        clip: rect(0, 0, 0, 0);
        clip-path: inset(50%);
        height: 1px;
        overflow: hidden;
        position: absolute;
        white-space: nowrap;
        width: 1px;
      }
    </style>
  </body>
</html>
